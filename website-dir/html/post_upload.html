<!DOCTYPE html>
<html lang="en">
<head>
    <title>Thrifter.</title>

    <!-- Meta Tags-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width = device-width, initial-scale=1, user-scalable=yes">

    <!-- extern stylesheets-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css"
          integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <!-- custom style-->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/nav.css">
    <link rel="stylesheet" href="../css/product.css">
    <link rel="stylesheet" href="../css/footer.css">
    <!-- scripts-->
    <script src="../JS/jquery-3.3.1.min.js"></script>
    <script src="../JS/popper.min.js"></script>
    <script src="../JS/bootstrap.min.js"></script>
    <script src="../JS/vh-fix.js"></script>
    <script src="../JS/base.js"></script>

</head>
<body>
<div class="post-upload-modal">
    <div class="post-upload-inner">
        <div class="post-upload-head row d-flex justify-content-between ">
            <a onclick="closePost()"><i class="fas fa-times fa-lg"></i></a>
            <a onclick="validatepost()" class="text-primary">fertig</a>
        </div>
        <div class="post-upload-body py-3">
            <div class="form-outer">
                <div id="postupload-error-message" class="my-3 text-danger"></div>
                <form name="newPost" onsubmit="return validatepost_input()">
                    <label for="picture">Bild</label>
                    <input id="picture" type="file" name="picture" class="form-control-file">

                    <label id="title_text" for="titel">Titel</label>
                    <input id="titel" class="form-control" name="title" type="text">

                    <label id="description_text" for="description">Beschreibung</label>
                    <input id="description" class="form-control" name="description" type="text">

                    <label id="price_text" for="price">Preis</label>
                    <input id="price" type="number" name="price" class="form-control">

                    <label for="color">Farbe</label>
                    <input id="color" class="form-control" name="color" type="color">

                    <label for="brand">Marke</label>
                    <input id="brand" type="text" name="brand" class="form-control">

                    <label for="gender">Gender</label>
                    <input id="gender" type="text" name="gender" class="form-control">

                    <label for="zustand">Zustand</label>
                    <input id="zustand" type="text" name="condition" class="form-control">

                    <label for="category">Kategorie</label>
                    <input id="category" type="text" name="category" class="form-control">

                    <label for="size">Größe</label>
                    <input id="size" type="text" name="size" class="form-control">
                    <button type="submit" value="submit" class="btn btn-secondary rounded-0 w-100 my-1 login-input">
                        Hochladen
                    </button>
                </form>
                <script>
                    function validatepost_input() {
                        resetpostupload();
                        var validate = true;
                        var errorstring = "";
                        if(document.newPost.title.value.length === 0){
                            errorstring += "Titel darf nicht leer sein!";
                            document.newPost.title.classList.add("input-wrong");
                            document.getElementById("title_text").classList.add("input-wrong-text");
                            validate = false;
                        }
                        if(document.newPost.description.value.length === 0){
                            errorstring += "Beschreibung darf nicht leer sein!";
                            document.newPost.description.classList.add("input-wrong");
                            document.getElementById("description_text").classList.add("input-wrong-text");
                            validate = false;
                        }
                        if(document.newPost.price.value.length === 0){
                            errorstring += "Beschreibung darf nicht leer sein!";
                            document.newPost.price.classList.add("input-wrong");
                            document.getElementById("price_text").classList.add("input-wrong-text");
                            validate = false;
                        }
                        //Todo imprelement restliche checks

                        if (!validate) {
                            $("#postupload-error-message").text(errorstring);
                        }
                        return validate;
                    }
                    function resetpostupload() {
                        try {
                            var c = document.newPost.children;
                            for (let i = 0; i < c.length; i++) {
                                if (c[i].classList.contains("input-wrong") || c[i].classList.contains("input-wrong-text")) {
                                    c[i].classList.remove("input-wrong");
                                    c[i].classList.remove("input-wrong-text");
                                }
                            }
                            $("#error-message").text("");
                        }
                        catch (e) {
                            console.log(e);
                        }
                    }
                </script>
            </div>
        </div>
    </div>
</div>
</body>
</html>